try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="640e7b2f-75c5-4921-8365-3898ea17f348",e._sentryDebugIdIdentifier="sentry-dbid-640e7b2f-75c5-4921-8365-3898ea17f348")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4335],{32117:function(e,n,r){Promise.resolve().then(r.bind(r,54670)),Promise.resolve().then(r.bind(r,23723))},62756:function(e,n,r){"use strict";Object.defineProperty(n,"$",{enumerable:!0,get:function(){return o}});let t=r(29774);function o(e){let{createServerReference:n}=r(89468);return n(e,t.callServer)}},54670:function(e,n,r){"use strict";r.d(n,{default:function(){return i}});var t=r(44772);r(46330);var o=r(59072);function i(e){let{children:n}=e;return(0,t.jsx)("div",{onContextMenu:e=>{e.preventDefault()},className:"relative overflow-hidden h-screen flex flex-col","data-sentry-component":"Preview","data-sentry-source-file":"preview.tsx",children:(0,t.jsx)("div",{className:"w-full h-full relative",children:(0,t.jsx)(o.xr,{className:"w-full h-full","data-sentry-element":"ScrollArea","data-sentry-source-file":"preview.tsx",children:n})})})}},59072:function(e,n,r){"use strict";r.d(n,{nh:function(){return l},xr:function(){return a}});var t=r(44772),o=r(46330),i=r(87435),u=r(23569);let a=o.forwardRef((e,n)=>{let{className:r,children:o,...a}=e;return(0,t.jsxs)(i.fC,{ref:n,className:(0,u.cn)("relative overflow-hidden",r),...a,children:[(0,t.jsx)(i.l_,{className:"h-full w-full rounded-[inherit]",children:o}),(0,t.jsx)(s,{}),(0,t.jsx)(i.Ns,{})]})});a.displayName=i.fC.displayName;let l=o.forwardRef((e,n)=>{let{className:r,children:o,...a}=e;return(0,t.jsxs)(i.fC,{ref:n,className:(0,u.cn)("relative overflow-hidden",r),...a,children:[(0,t.jsx)(i.l_,{className:"h-full w-full rounded-[inherit]",children:o}),(0,t.jsx)(s,{orientation:"horizontal"}),(0,t.jsx)(i.Ns,{})]})});l.displayName="HorizontalScrollArea";let s=o.forwardRef((e,n)=>{let{className:r,orientation:o="vertical",...a}=e;return(0,t.jsx)(i.gb,{ref:n,orientation:o,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===o&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===o&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...a,children:(0,t.jsx)(i.q4,{className:"relative flex-1 rounded-full bg-border"})})});s.displayName=i.gb.displayName},23723:function(e,n,r){"use strict";r.d(n,{FunnelProvider:function(){return v},v:function(){return b}});var t=r(44772),o=r(46330),i=r(44250),u=r(32411),a=r(23569);r(29774);var l=r(62756),s=(0,l.$)("69ec1c6cc8e98827b3b8b95aa3d2cbefb1779873"),c=(0,l.$)("82290e21610858bd9cf4e8479e9821c7d91bf89e"),f=(0,l.$)("3dc83928ce63d49561440eb97e3665e304711f7f"),d=(0,l.$)("4e841b74e29c5a142cbe32625f4ded8705ae32f8"),h=(0,l.$)("a78af166e9d141c5da4f5c91b6fdaf785a9cb2b7"),m=(0,l.$)("424bcd70aa76bcc66c5d8ee42c82cf497fd957f6"),w=(0,l.$)("2caee46b86f10803a542ba15bd237ba7096aabb7");let p=(0,o.createContext)(null),v=e=>{var n;let{children:r}=e,[l,v]=(0,o.useState)(null),[b,g]=(0,o.useState)(!1),[y,N]=(0,o.useState)(!1),[E,S]=(0,o.useState)(u.j.CONSTRUCTOR),[x,M]=(0,o.useState)([]),[A,j]=(0,o.useState)((null===(n=x[0])||void 0===n?void 0:n.id)||""),[D,O]=(0,o.useState)(null),[T,C]=(0,o.useState)(!1),[F,R]=(0,o.useState)(null),[P,k]=(0,o.useState)(null),[_,I]=(0,o.useState)(null),[U,z]=(0,o.useState)(null),[L,W]=(0,o.useState)(!1),[$,V]=(0,o.useState)(null),[H,G]=(0,o.useState)(null),[B,q]=(0,o.useState)(!1),[J,Z]=(0,o.useState)(null),[K,Q]=(0,o.useState)(!1),[X,Y]=(0,o.useState)(!1),[ee,en]=(0,o.useState)({}),{state:er,set:et,undo:eo,redo:ei,clear:eu,canUndo:ea,canRedo:el}=(0,i.bA)({items:x});(0,o.useEffect)(()=>{x&&et({...er,items:x})},[x]);let es=async(e,n,r)=>{if(b)return;g(!0);let[t,o]=await (0,a.zM)(fetch(e?r?"/api/funnels/slug/".concat(n,"/published"):"/api/funnels/slug/".concat(n):"/api/funnels/".concat(n)));if(t)throw g(!1),Error("An unknown error occurred while trying to fetch Funnel Data.");let i=await o.json();if(!i.success)throw g(!1),Error("An error occurred while fetching Funnel Data.");let u=i.funnel||i.publishedFunnel;M(u.steps),R(u.designSettings),Y(!r&&u.blocked);let l={name:u.name||"Funnel",slug:u.slug,domains:u.domains,domainVerified:u.domainVerified||!1,seoTitle:u.seoTitle||"",seoDescription:u.seoDescription||"",faviconUrl:u.faviconUrl||"",scripts:u.scripts,visible:u.visible||!0,clonnable:u.clonnable||!1},[s,c]=await (0,a.zM)(fetch("/api/funnels/".concat(u.id,"/webhook")));if(s)throw g(!1),Error("An error occurred while fetching Funnel Webhook Data.");let f=await c.json();if(!f.success)throw g(!1),Error("An error occurred while fetching Funnel Webhook Data.");I(f.webhook),k(l),O(null);let d=u.steps;if(j(d.length>0?d[0].id:""),v(r?u.funnelId:u.id),g(!1),!e&&!y){N(!0);let[e,r]=await (0,a.zM)(fetch("/api/funnels/".concat(n,"/leads/performance")));if(e)throw N(!1),Error("An error occurred while fetching Funnel Lead Data.");let t=await r.json();if(!t.success)throw N(!1),Error("An error occurred while fetching Funnel Lead Data.");V(t.insights);let[o,i]=await (0,a.zM)(fetch("/api/funnels/".concat(n,"/leads?page=0&limit=25")));if(o)throw N(!1),Error("An error occurred while fetching Funnel Lead Data.");let u=await i.json();if(!u.success)throw N(!1),Error("An error occurred while fetching Funnel Lead Data.");G(u.leads),N(!1)}},ec=async(e,n)=>{if(!l)return;g(!0);let[r,t]=await (0,a.zM)(fetch("/api/funnels/".concat(l,"/leads?page=").concat(e,"&limit=").concat(n)));if(r)throw g(!1),Error("An error occurred while fetching Funnel Lead Data.");let o=await t.json();if(!o.success)throw g(!1),Error("An error occurred while fetching Funnel Lead Data.");G(o.leads),g(!1)},ef=async()=>{if(b||!l||!P||!F||!x)return;g(!0);let e={name:P.name,slug:P.slug,domains:P.domains,domainVerified:P.domainVerified,scripts:P.scripts,seoTitle:P.seoTitle,seoDescription:P.seoDescription,faviconUrl:P.faviconUrl,visible:P.visible,steps:x,designSettings:F,blocked:X,clonnable:P.clonnable},[n,r]=await (0,a.zM)(c({id:l,funnel:e}));if(n)throw Error("An unknown error occurred while trying to update Funnel Data.");if(!r.success)throw Error("An error occurred while updating Funnel Data.");g(!1)},ed=async()=>{if(!l)return;let[e]=await (0,a.zM)(ef());if(e)throw Error("An error occurred while saving Funnel Data.");g(!0);let[n,r]=await (0,a.zM)(h(l));if(n)throw Error("An unknown error occurred while trying to publish Funnel Data.");if(!r.success)throw Error("An error occurred while publishing Funnel Data.");g(!1)},eh=async()=>{if(U||!l)return;g(!0);let[e,n]=await (0,a.zM)(w({funnelId:l}));if(e)throw Error("An unknown error occurred while creating the new Lead.");if(!n.success||(g(!1),!n.id))throw Error("An error occurred while creating the new Lead.");return z(n.id),n.id},em=(0,o.useCallback)(e=>{if(e&&A&&U&&l)try{fetch("/api/leads/".concat(U,"/action"),{method:"POST",body:JSON.stringify({stepId:A,metadata:e})}),s(l,U,e)}catch(e){console.error("Error saving lead actions: ",e)}},[A,l,U]),ew=async e=>{if(!H||!l)return;g(!0);let[n,r]=await (0,a.zM)(m(e,l));if(n)throw Error("An unknown error occurred while deleting leads.");if(!r.success)throw Error("An error occurred while deleting leads.");g(!1)},ep=async(e,n,r,t)=>{if(!l)return;let[o,i]=await (0,a.zM)(f(l,{url:e,method:n,contentType:r,token:t}));if(o)throw Error("Um erro desconhecido ocorreu ao salvar o webhook.");if(!i.success)throw Error("Houve um erro ao salvar o webhook. Tente novamente ou contate o suporte.");let u=i.webhook;if(!u)throw Error("Houve um erro ao salvar o webhook. Tente novamente ou contate o suporte.");I(u)},ev=async()=>{if(!l)return;let[e,n]=await (0,a.zM)(d(l));if(e)throw Error("Um erro desconhecido ocorreu ao remover o webhook.");if(!n.success)throw Error("Houve um erro ao remover o webhook. Tente novamente ou contate o suporte.");I(null)},eb=async()=>{if(!l)return!1;let[e,n]=await (0,a.zM)(fetch("/api/funnels/".concat(l,"/validate")));if(e)return!1;let r=await n.json();return!!r.success&&r.published};return(0,t.jsx)(p.Provider,{value:{isLoading:b,isLoadingLeads:y,leadId:U,editorMode:E,steps:x,history:er,canRedo:el,canUndo:ea,currentStep:A,currentComponent:D,mobileMode:T,leads:H,designSettings:F,settings:P,webhook:_,previewMode:L,funnelId:l,leadInsights:$,mobileOptionsOpen:B,currentDraggingItem:J,quillOpen:K,isFunnelBlocked:X,isFunnelPublished:eb,redirectParams:ee,redo:ei,undo:eo,fetchFunnel:es,refetchLeads:ec,deleteLeads:ew,saveFunnel:ef,publishFunnel:ed,setEditorMode:S,setSteps:M,setCurrentStep:j,setCurrentComponent:O,toggleMobileMode:()=>{C(!T)},setDesignSettings:R,setSettings:k,setWebhook:I,generateFunnelLead:eh,saveLeadActions:em,setPreviewMode:W,setMobileOptionsOpen:q,setCurrentDraggingItem:Z,saveWebhook:ep,deleteWebhook:ev,setQuillOpen:Q,setRedirectParams:en},"data-sentry-element":"FunnelContext.Provider","data-sentry-component":"FunnelProvider","data-sentry-source-file":"funnel-context.tsx",children:r})},b=()=>{let e=(0,o.useContext)(p);if(!e)throw Error("useFunnelContext must be used within a FunnelProvider");return e}},32411:function(e,n,r){"use strict";var t,o;r.d(n,{j:function(){return t}}),(o=t||(t={}))[o.CONSTRUCTOR=1]="CONSTRUCTOR",o[o.FLOW=2]="FLOW",o[o.DESIGNER=3]="DESIGNER",o[o.LEADS=4]="LEADS",o[o.SETTINGS=5]="SETTINGS"},23569:function(e,n,r){"use strict";r.d(n,{Rz:function(){return f},cn:function(){return l},gn:function(){return m},s9:function(){return h},sC:function(){return d},xl:function(){return c},zM:function(){return s}});var t=r(99428),o=r(92588),i=r.n(o),u=r(83701),a=r(32566);function l(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,u.m6)((0,t.W)(n))}async function s(e){try{let n=await e;return[void 0,n]}catch(e){return[e]}}let c=e=>i().sortBy(e,e=>e.position),f=(e,n)=>({...e,position:n});function d(e){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r="";for(let t=0;t<e;t++){let e=Math.floor(Math.random()*n.length);r+=n[e]}return r}let h=e=>(0,a.s9)(e,{wordwrap:!1}),m=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)},93669:function(e,n,r){"use strict";function t(e,[n,r]){return Math.min(r,Math.max(n,e))}r.d(n,{u:function(){return t}})},68813:function(e,n,r){"use strict";function t(e,n,{checkForDefaultPrevented:r=!0}={}){return function(t){if(e?.(t),!1===r||!t.defaultPrevented)return n?.(t)}}r.d(n,{M:function(){return t}})},63871:function(e,n,r){"use strict";r.d(n,{F:function(){return o},e:function(){return i}});var t=r(46330);function o(...e){return n=>e.forEach(e=>{"function"==typeof e?e(n):null!=e&&(e.current=n)})}function i(...e){return t.useCallback(o(...e),e)}},15836:function(e,n,r){"use strict";r.d(n,{b:function(){return u},k:function(){return i}});var t=r(46330),o=r(44772);function i(e,n){let r=t.createContext(n),i=e=>{let{children:n,...i}=e,u=t.useMemo(()=>i,Object.values(i));return(0,o.jsx)(r.Provider,{value:u,children:n})};return i.displayName=e+"Provider",[i,function(o){let i=t.useContext(r);if(i)return i;if(void 0!==n)return n;throw Error(`\`${o}\` must be used within \`${e}\``)}]}function u(e,n=[]){let r=[],i=()=>{let n=r.map(e=>t.createContext(e));return function(r){let o=r?.[e]||n;return t.useMemo(()=>({[`__scope${e}`]:{...r,[e]:o}}),[r,o])}};return i.scopeName=e,[function(n,i){let u=t.createContext(i),a=r.length;r=[...r,i];let l=n=>{let{scope:r,children:i,...l}=n,s=r?.[e]?.[a]||u,c=t.useMemo(()=>l,Object.values(l));return(0,o.jsx)(s.Provider,{value:c,children:i})};return l.displayName=n+"Provider",[l,function(r,o){let l=o?.[e]?.[a]||u,s=t.useContext(l);if(s)return s;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${n}\``)}]},function(...e){let n=e[0];if(1===e.length)return n;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=r.reduce((n,{useScope:r,scopeName:t})=>{let o=r(e)[`__scope${t}`];return{...n,...o}},{});return t.useMemo(()=>({[`__scope${n.scopeName}`]:o}),[o])}};return r.scopeName=n.scopeName,r}(i,...n)]}},68836:function(e,n,r){"use strict";r.d(n,{gm:function(){return i}});var t=r(46330);r(44772);var o=t.createContext(void 0);function i(e){let n=t.useContext(o);return e||n||"ltr"}},36817:function(e,n,r){"use strict";r.d(n,{z:function(){return u}});var t=r(46330),o=r(63871),i=r(69591),u=e=>{var n,r;let u,l;let{present:s,children:c}=e,f=function(e){var n,r;let[o,u]=t.useState(),l=t.useRef({}),s=t.useRef(e),c=t.useRef("none"),[f,d]=(n=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,n)=>{let t=r[e][n];return null!=t?t:e},n));return t.useEffect(()=>{let e=a(l.current);c.current="mounted"===f?e:"none"},[f]),(0,i.b)(()=>{let n=l.current,r=s.current;if(r!==e){let t=c.current,o=a(n);e?d("MOUNT"):"none"===o||(null==n?void 0:n.display)==="none"?d("UNMOUNT"):r&&t!==o?d("ANIMATION_OUT"):d("UNMOUNT"),s.current=e}},[e,d]),(0,i.b)(()=>{if(o){var e;let n;let r=null!==(e=o.ownerDocument.defaultView)&&void 0!==e?e:window,t=e=>{let t=a(l.current).includes(e.animationName);if(e.target===o&&t&&(d("ANIMATION_END"),!s.current)){let e=o.style.animationFillMode;o.style.animationFillMode="forwards",n=r.setTimeout(()=>{"forwards"===o.style.animationFillMode&&(o.style.animationFillMode=e)})}},i=e=>{e.target===o&&(c.current=a(l.current))};return o.addEventListener("animationstart",i),o.addEventListener("animationcancel",t),o.addEventListener("animationend",t),()=>{r.clearTimeout(n),o.removeEventListener("animationstart",i),o.removeEventListener("animationcancel",t),o.removeEventListener("animationend",t)}}d("ANIMATION_END")},[o,d]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:t.useCallback(e=>{e&&(l.current=getComputedStyle(e)),u(e)},[])}}(s),d="function"==typeof c?c({present:f.isPresent}):t.Children.only(c),h=(0,o.e)(f.ref,(u=null===(n=Object.getOwnPropertyDescriptor(d.props,"ref"))||void 0===n?void 0:n.get)&&"isReactWarning"in u&&u.isReactWarning?d.ref:(u=null===(r=Object.getOwnPropertyDescriptor(d,"ref"))||void 0===r?void 0:r.get)&&"isReactWarning"in u&&u.isReactWarning?d.props.ref:d.props.ref||d.ref);return"function"==typeof c||f.isPresent?t.cloneElement(d,{ref:h}):null};function a(e){return(null==e?void 0:e.animationName)||"none"}u.displayName="Presence"},81377:function(e,n,r){"use strict";r.d(n,{WV:function(){return a},jH:function(){return l}});var t=r(46330),o=r(2102),i=r(49811),u=r(44772),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,n)=>{let r=t.forwardRef((e,r)=>{let{asChild:t,...o}=e,a=t?i.g7:n;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,u.jsx)(a,{...o,ref:r})});return r.displayName=`Primitive.${n}`,{...e,[n]:r}},{});function l(e,n){e&&o.flushSync(()=>e.dispatchEvent(n))}},49811:function(e,n,r){"use strict";r.d(n,{A4:function(){return l},g7:function(){return u}});var t=r(46330),o=r(63871),i=r(44772),u=t.forwardRef((e,n)=>{let{children:r,...o}=e,u=t.Children.toArray(r),l=u.find(s);if(l){let e=l.props.children,r=u.map(n=>n!==l?n:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,i.jsx)(a,{...o,ref:n,children:t.isValidElement(e)?t.cloneElement(e,void 0,r):null})}return(0,i.jsx)(a,{...o,ref:n,children:r})});u.displayName="Slot";var a=t.forwardRef((e,n)=>{let{children:r,...i}=e;if(t.isValidElement(r)){let e,u;let a=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref;return t.cloneElement(r,{...function(e,n){let r={...n};for(let t in n){let o=e[t],i=n[t];/^on[A-Z]/.test(t)?o&&i?r[t]=(...e)=>{i(...e),o(...e)}:o&&(r[t]=o):"style"===t?r[t]={...o,...i}:"className"===t&&(r[t]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props),ref:n?(0,o.F)(n,a):a})}return t.Children.count(r)>1?t.Children.only(null):null});a.displayName="SlotClone";var l=({children:e})=>(0,i.jsx)(i.Fragment,{children:e});function s(e){return t.isValidElement(e)&&e.type===l}},17906:function(e,n,r){"use strict";r.d(n,{W:function(){return o}});var t=r(46330);function o(e){let n=t.useRef(e);return t.useEffect(()=>{n.current=e}),t.useMemo(()=>(...e)=>n.current?.(...e),[])}},69591:function(e,n,r){"use strict";r.d(n,{b:function(){return o}});var t=r(46330),o=globalThis?.document?t.useLayoutEffect:()=>{}}},function(e){e.O(0,[7495,8405,4250,7435,74,2966,2040,1744],function(){return e(e.s=32117)}),_N_E=e.O()}]);